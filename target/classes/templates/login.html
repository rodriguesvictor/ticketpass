<!DOCTYPE html>
<html lang="pt-br" xmlns= "http://www.w3.org/1999/xhtml"
	xmlns:th= "http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<title>Login</title>
	<link rel="stylesheet" href="/cadastroElogin/css/login.css">
	<link href="https://fonts.googleapis.com/css?family=Questrial&display=swap" rel="stylesheet">
	<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
	
	 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

	
</head>
<body>
	<div class="login">
		<div class="header-section">
			<h1 style="text-align: center;"><strong>Login</strong></h1>
		</div>
		<form th:action="@{/login}" th:object="${usuario}" method="post">
		<div th:if="${mensagemErro != null}" th:text="${mensagemErro}" class="alert alert-danger"></div>
		<input th:if="${acessoNegado != null}" name="retorno" type="hidden" th:value="${retorno}">
		
		<div class="form-group">
			<input type="text" class="form-control" id="inputEmail" required size="45" th:field="*{email}">
			<label for="">Email:</label>
			<br><br><br><br>
			<p class="emailError"></p>
		</div>
		<div class="form-group">
			<input type="password" class="form-control" id="inputPassword" required size="45" th:field="*{senha}">
			<label for="">Senha:</label>
			<br><br><br><br>
			<p class="passwordError"></p>
		</div>
		<div class="btn-group">
			<button type="submit" class="btn-login">Entrar</button>
			<a th:href="@{/recuperar-senha}" class="forgot-password">Esqueceu a senha?</a>
			<div class="clear"></div>
		</div>
   
		<div class="ou">OU</div>
		
		<div class='g-sign-in-button'>
  			<div class=content-wrapper>
  			<div id="google" class='logo-wrapper'>  
    			<img  src='https://developers.google.com/identity/images/g-logo.png'>
    		</div>  
    	<span class='text-container'> 
      		<span>Entre com o Google</span>
    	</span>
  	</div>  
	</div>
	<div class="btn-group">
    	<button class="btn-voltar"><a href="index" style="text-decoration: none">Voltar para página inicial</a></button>
    </div>
 </form>
		<div class="footer-section">
			<p>Não possui cadastro?&nbsp; <a href="/cadastro">Crie uma conta!</a></p>
		</div>
	</div>
	
	<script> 
		function isEmail(inputEmail) {
    	var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
			return regex.test(inputEmail);
		}
		function validatePassword(inputPassword) {
			return inputPassword.length > 4;
		}

		$(document).ready(function(){
    		$('#inputEmail').change(function(){
        	var email = $(this).val().trim();
        // alert(`email = ${JSON.stringify(email)}`)
        	if(!isEmail(email)) {
       //Error?
           	$(".emailError").html("O formato do email não é válido!");
        } else {
            $(".emailError").html("");
        }
    });
    $('#inputPassword').change(function(){
        var password = $(this).val();	
        if(!validatePassword(password)) {
			$(".passwordError").html("A senha deve ter pelo menos 5 caracteres!");
		} else {
			$(".passwordError").html("");
		}
    });
});

</script>	
	
</body>
</html>
